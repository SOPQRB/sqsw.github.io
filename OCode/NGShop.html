

<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é»‘äººé©¬å…‹çš„ç¥ç§˜å•†åº—</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        .npc-float { animation: float 3s ease-in-out infinite; }
        .item-hover:hover { transform: scale(1.05); box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.2); }
        .dialog-enter { animation: dialogEnter 0.3s ease-out; }
        @keyframes dialogEnter {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        body {
            background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), 
                        url('https://images.unsplash.com/photo-1516054575922-f0b8eeadec1a?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');
            background-size: cover;
            background-attachment: fixed;
            background-position: center;
        }
    </style>
</head>
<body class="text-white min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <header class="text-center mb-8">
            <h1 class="text-4xl font-bold text-yellow-400 mb-2">é»‘äººé©¬å…‹çš„ç¥ç§˜å•†åº—</h1>
            <p class="text-gray-300 mb-4">åœ¨åœ°é“ç«™æŠ¢æ¥çš„æ‰‹æœºï¼Œåœ¨è¿™é‡Œéƒ½èƒ½å–å‡ºå¥½ä»·é’±</p>
            <div class="flex justify-center items-center gap-4">
                <div class="bg-yellow-800 px-4 py-2 rounded-lg">
                    <span id="cash" class="font-bold">1000</span> <i class="fas fa-money-bill-wave text-yellow-300"></i>
                </div>
                <div class="bg-blue-800 px-4 py-2 rounded-lg">
                    <span id="street-cred" class="font-bold">20</span> <i class="fas fa-user-secret text-blue-300"></i>
                </div>
            </div>
        </header>

        <main class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- ç©å®¶åº“å­˜ -->
            <div class="bg-gray-800 rounded-xl p-6 shadow-lg">
                <h2 class="text-2xl font-bold text-yellow-300 mb-4 border-b border-yellow-600 pb-2">ä½ çš„èµƒç‰©</h2>
                <div id="player-inventory" class="grid grid-cols-2 gap-3">
                    <!-- ç‰©å“å°†é€šè¿‡JSåŠ¨æ€æ·»åŠ  -->
                </div>
                <button id="steal-btn" class="mt-4 w-full bg-red-600 hover:bg-red-700 text-white py-2 px-4 rounded-lg transition">
                    <i class="fas fa-running mr-2"></i> å»åœ°é“ç«™æŠ¢æ‰‹æœº
                </button>
            </div>

            <!-- å•†åº—åŒºåŸŸ -->
            <div class="bg-gray-800 rounded-xl p-6 shadow-lg flex flex-col">
                <div class="flex-1">
                    <div id="npc-container" class="text-center mb-6">
                        <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-1.2.1&auto=format&fit=crop&w=334&q=80" 
                             alt="é»‘äººå•†äººé©¬å…‹" class="w-32 h-32 mx-auto rounded-full border-4 border-yellow-500 npc-float mb-4">
                        <div id="npc-dialog" class="bg-gray-700 rounded-lg p-4 mb-4 dialog-enter">
                            å˜¿å…„å¼Ÿï¼Œä»Šå¤©åˆå¸¦äº†ä»€ä¹ˆ"å¥½ä¸œè¥¿"æ¥ï¼Ÿ
                        </div>
                    </div>

                    <div id="customer-info" class="mb-4 p-3 bg-gray-700 rounded-lg">
                        <h3 class="font-bold text-yellow-300">å½“å‰å®¢æˆ·: <span id="customer-type">éšæœºè·¯äºº</span></h3>
                        <div class="text-sm text-gray-300">ç ä»·å‡ ç‡: <span id="bargain-chance">30%</span></div>
                    </div>
                </div>

                <div class="mt-auto pt-4 border-t border-gray-700">
                    <button id="find-customer-btn" class="w-full bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg transition">
                        <i class="fas fa-user-friends mr-2"></i> å¯»æ‰¾æ–°å®¢æˆ· (èŠ±è´¹: 50ç°é‡‘)
                    </button>
                </div>
            </div>

            <!-- æ¸¸æˆæ—¥å¿— -->
            <div class="bg-gray-800 rounded-xl p-6 shadow-lg">
                <h2 class="text-2xl font-bold text-yellow-300 mb-4 border-b border-yellow-600 pb-2">çŠ¯ç½ªè®°å½•</h2>
                <div id="game-log" class="h-64 overflow-y-auto space-y-2 pr-2">
                    <div class="text-gray-400 text-sm">æ¸¸æˆå¼€å§‹ï¼é©¬å…‹æ­£åœ¨ç­‰å¾…ä½ çš„èµƒç‰©...</div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // æ¸¸æˆçŠ¶æ€
        const gameState = {
            cash: 1000,
            streetCred: 20,
            inventory: [],
            currentCustomer: null,
            itemTypes: [
                { id: 1, name: 'iPhone 12', basePrice: 500, rarity: 'common', icon: 'mobile', condition: 'è½»å¾®åˆ’ç—•' },
                { id: 2, name: 'ä¸‰æ˜Ÿ Galaxy S21', basePrice: 450, rarity: 'common', icon: 'mobile', condition: 'å±å¹•ç¢è£‚' },
                { id: 3, name: 'åä¸º P40', basePrice: 400, rarity: 'common', icon: 'mobile', condition: 'å¯†ç é”å®š' },
                { id: 4, name: 'iPad Pro', basePrice: 800, rarity: 'uncommon', icon: 'tablet', condition: 'æœªæ¿€æ´»' },
                { id: 5, name: 'MacBook Air', basePrice: 1200, rarity: 'rare', icon: 'laptop', condition: 'è¿½è¸ªä¸­' },
                { id: 6, name: 'ä¸‰æ˜Ÿ Galaxy S23', basePrice: 200, rarity: 'uncommon', icon: 'mobile', condition: 'è½»å¾®åˆ’ç—•' },
				{ id: 7, name: 'MacBook Pro', basePrice: 200, rarity: 'uncommon', icon: 'laptop', condition: 'æœ‰è´¦å·' },
                { id: 8, name: 'Airpods Pro', basePrice: 200, rarity: 'uncommon', icon: 'headphones', condition: 'è½»å¾®åˆ’ç—•' },
                { id: 9, name: 'Google Pixel 6', basePrice: 300, rarity: 'common', icon: 'mobile', condition: 'å±å¹•ç¢è£‚' },
                { id: 10, name: 'OnePlus 9', basePrice: 350, rarity: 'common', icon: 'mobile', condition: 'å¯†ç é”å®š' },
                { id: 11, name: 'iPhone 13 Pro', basePrice: 700, rarity: 'rare', icon: 'mobile', condition: 'æœªæ¿€æ´»' },
                { id: 12, name: 'Surface Pro 7', basePrice: 900, rarity: 'rare', icon: 'laptop', condition: 'è¿½è¸ªä¸­' },
                { id: 13, name: 'Sony WH-1000XM4', basePrice: 250, rarity: 'uncommon', icon: 'headphones', condition: 'è½»å¾®åˆ’ç—•' }
            ],
            customerTypes: [
                { 
                    type: 'å­¦ç”Ÿ', 
                    dialog: ["è¿™æ‰‹æœºèƒ½ä¾¿å®œç‚¹å—ï¼Ÿ", "æˆ‘åªæœ‰è¿™ä¹ˆå¤šé’±...", "è¿™çœŸçš„æ˜¯æ­£å“å—ï¼Ÿ"], 
                    bargainChance: 0.8,
                    bargainFactor: 0.6 
                },
                { 
                    type: 'å•†äºº', 
                    dialog: ["è¿™æ‰¹è´§æˆ‘å…¨è¦äº†", "æˆ‘éœ€è¦æ›´ä½çš„ä»·é’±", "æ¥æºå¯é å—ï¼Ÿ"], 
                    bargainChance: 0.5,
                    bargainFactor: 0.8 
                },
                { 
                    type: 'æ”¶è—å®¶', 
                    dialog: ["ç¨€æœ‰æœºå‹æˆ‘å‡ºé«˜ä»·", "ä¿å­˜çŠ¶æ€å¦‚ä½•ï¼Ÿ", "è¿™åœ¨æˆ‘çš„æ”¶è—é‡Œå¾ˆç‰¹åˆ«","å¥½æäº†ï¼"], 
                    bargainChance: 0.3,
                    bargainFactor: 1.2 
                },
                { 
                    type: 'è­¦å¯Ÿ', 
                    dialog: ["è¿™äº›æ‰‹æœºæœ‰å‘ç¥¨å—ï¼Ÿ", "çœ‹èµ·æ¥åƒæ˜¯èµƒç‰©", "æˆ‘éœ€è¦æ£€æŸ¥ä¸€ä¸‹","ä½ æœ‰äº›å¯ç–‘"], 
                    bargainChance: 0.5,
                    bargainFactor: 0.5,
                    danger: true
                }
            ]
        };

        // åˆå§‹åŒ–æ¸¸æˆ
        function initGame() {
            // ç»™ç©å®¶åˆå§‹ç‰©å“
            for (let i = 0; i < 3; i++) {
                addRandomItemToInventory();
            }
            
            // ç”Ÿæˆç¬¬ä¸€ä¸ªå®¢æˆ·
            generateNewCustomer();
            
            // æ›´æ–°UI
            updateUI();
            
            // è®¾ç½®äº‹ä»¶ç›‘å¬å™¨
            document.getElementById('find-customer-btn').addEventListener('click', generateNewCustomer);
            document.getElementById('steal-btn').addEventListener('click', stealItems);
        }

        // å·å–ç‰©å“
        function stealItems() {
            // éšæœº1-3ä¸ªç‰©å“
            const count = 1 + Math.floor(Math.random() * 3);
            
            // 10%å‡ ç‡è¢«è­¦å¯ŸæŠ“åˆ°
            if (Math.random() < 0.1) {
                const fine = Math.floor(gameState.cash * 0.2);
                gameState.cash = Math.max(0, gameState.cash - fine);
                gameState.streetCred = Math.max(0, gameState.streetCred - 5);
                addLogMessage(`ğŸš¨ ä½ åœ¨å·æ‰‹æœºæ—¶è¢«è­¦å¯ŸæŠ“ä½äº†ï¼ç½šæ¬¾$${fine}å¹¶æ‰£å‡5ç‚¹ä¿¡èª‰ï¼`);
            } else {
                for (let i = 0; i < count; i++) {
                    addRandomItemToInventory();
                }
                addLogMessage(`ä½ æˆåŠŸä»åœ°é“ç«™å·åˆ°äº†${count}éƒ¨æ‰‹æœºï¼`);
                
                // å¢åŠ è¡—å¤´ä¿¡èª‰
                gameState.streetCred = Math.min(100, gameState.streetCred + 1);
            }
            
            updateUI();
            renderPlayerInventory();
        }

        // æ·»åŠ éšæœºç‰©å“åˆ°ç©å®¶åº“å­˜
        function addRandomItemToInventory() {
            const randomType = gameState.itemTypes[Math.floor(Math.random() * gameState.itemTypes.length)];
            const item = {
                ...randomType,
                id: Date.now() + Math.floor(Math.random() * 1000),
                price: calculateItemPrice(randomType)
            };
            gameState.inventory.push(item);
            renderPlayerInventory();
        }

        // è®¡ç®—ç‰©å“ä»·æ ¼
        function calculateItemPrice(item) {
            const credModifier = 1 + (gameState.streetCred / 100);
            const rarityModifier = {
                common: 1,
                uncommon: 1.3,
                rare: 1.7
            }[item.rarity];
            
            return Math.floor(item.basePrice * credModifier * rarityModifier * (0.8 + Math.random() * 0.4));
        }

        // ç”Ÿæˆæ–°å®¢æˆ·
        function generateNewCustomer() {
            if (gameState.cash < 50) {
                addLogMessage("ä½ æ²¡æœ‰è¶³å¤Ÿçš„ç°é‡‘å¯»æ‰¾æ–°å®¢æˆ·ï¼");
                return;
            }
            
            gameState.cash -= 50;
            gameState.currentCustomer = gameState.customerTypes[Math.floor(Math.random() * gameState.customerTypes.length)];
            
            // æ›´æ–°å®¢æˆ·ä¿¡æ¯æ˜¾ç¤º
            document.getElementById('customer-type').textContent = gameState.currentCustomer.type;
            document.getElementById('bargain-chance').textContent = `${Math.floor(gameState.currentCustomer.bargainChance * 100)}%`;
            
            // æ›´æ–°NPCå¯¹è¯
            updateCustomerDialog();
            
            addLogMessage(`ä½ æ‰¾åˆ°äº†ä¸€ä¸ªæ–°å®¢æˆ·ï¼š${gameState.currentCustomer.type}ï¼(-50ç°é‡‘)`);
            if (gameState.currentCustomer.danger) {
                addLogMessage("âš ï¸ è­¦å‘Šï¼šè¿™ä¸ªå®¢æˆ·å¯èƒ½æ˜¯è­¦å¯Ÿï¼äº¤æ˜“éœ€è°¨æ…ï¼");
            }
            
            updateUI();
        }

        // æ›´æ–°å®¢æˆ·å¯¹è¯
        function updateCustomerDialog() {
            const dialogs = gameState.currentCustomer.dialog;
            document.getElementById('npc-dialog').textContent = 
                dialogs[Math.floor(Math.random() * dialogs.length)];
        }

        // å‘å®¢æˆ·å‡ºå”®ç‰©å“
        function sellToCustomer(itemId) {
            const itemIndex = gameState.inventory.findIndex(item => item.id === itemId);
            if (itemIndex === -1) return;
            
            const item = gameState.inventory[itemIndex];
            let finalPrice = item.price;
            
            // å®¢æˆ·ç ä»·é€»è¾‘
            if (Math.random() < gameState.currentCustomer.bargainChance) {
                const bargainPrice = Math.floor(item.price * gameState.currentCustomer.bargainFactor);
                finalPrice = bargainPrice;
                addLogMessage(`å®¢æˆ·ç ä»·ï¼ä»$${item.price}ç åˆ°$${finalPrice}`);
            }
            
            // ä»åº“å­˜ç§»é™¤
            gameState.inventory.splice(itemIndex, 1);
            
            // å¢åŠ ç°é‡‘
            gameState.cash += finalPrice;
            
            // å½±å“è¡—å¤´ä¿¡èª‰
            const credChange = Math.floor(Math.random() * 5) - (gameState.currentCustomer.danger ? 5 : 1);
            gameState.streetCred = Math.max(0, Math.min(100, gameState.streetCred + credChange));
            
            // è­¦å¯Ÿé€®æ•é€»è¾‘
            if (gameState.currentCustomer.danger && Math.random() < 0.3) {
                const fine = Math.floor(gameState.cash * 0.3);
                gameState.cash = Math.max(0, gameState.cash - fine);
                addLogMessage(`ğŸš¨ ä½ è¢«è­¦å¯Ÿé€®æ•äº†ï¼ç½šæ¬¾$${fine}å¹¶æ²¡æ”¶è´§ç‰©ï¼`);
            }
            
            // æ›´æ–°å®¢æˆ·å¯¹è¯
            updateCustomerDialog();
            
            // æ·»åŠ æ—¥å¿—
            addLogMessage(`ä½ å–å‡ºäº†${item.name}(${item.condition})ï¼Œè·å¾—$${finalPrice}ï¼${credChange > 0 ? `(+${credChange}ä¿¡èª‰)` : credChange < 0 ? `(${credChange}ä¿¡èª‰)` : ''}`);
            
            // æ›´æ–°UI
            updateUI();
            renderPlayerInventory();
        }

        // æ·»åŠ æ—¥å¿—æ¶ˆæ¯
        function addLogMessage(message) {
            const logElement = document.getElementById('game-log');
            const messageElement = document.createElement('div');
            messageElement.className = 'text-gray-300';
            messageElement.innerHTML = `<span class="text-gray-500">[${new Date().toLocaleTimeString()}]</span> ${message}`;
            logElement.appendChild(messageElement);
            logElement.scrollTop = logElement.scrollHeight;
        }

        // æ¸²æŸ“ç©å®¶åº“å­˜
        function renderPlayerInventory() {
            const inventoryElement = document.getElementById('player-inventory');
            inventoryElement.innerHTML = '';
            
            if (gameState.inventory.length === 0) {
                inventoryElement.innerHTML = '<div class="col-span-2 text-center text-gray-400 py-4">ä½ çš„åº“å­˜ç©ºç©ºå¦‚ä¹Ÿ</div>';
                return;
            }
            
            gameState.inventory.forEach(item => {
                const itemElement = document.createElement('div');
                itemElement.className = 'bg-gray-700 rounded-lg p-3 flex flex-col item-hover transition cursor-pointer';
                itemElement.innerHTML = `
                    <div class="flex items-center mb-2">
                        <i class="fas fa-${item.icon} text-${getRarityColor(item.rarity)}-400 mr-2"></i>
                        <span class="font-bold">${item.name}</span>
                    </div>
                    <div class="text-sm text-gray-300 mb-1">çŠ¶æ€: ${item.condition}</div>
                    <div class="text-xs text-gray-400 mb-2">ç¨€æœ‰åº¦: <span class="text-${getRarityColor(item.rarity)}-300">${getRarityName(item.rarity)}</span></div>
                    <div class="mt-auto flex justify-between items-center">
                        <span class="text-yellow-300 font-bold">$${item.price}</span>
                        <button class="bg-green-600 hover:bg-green-700 text-white px-2 py-1 rounded text-sm sell-btn" data-id="${item.id}">
                            <i class="fas fa-hand-holding-usd mr-1"></i> å‡ºå”®
                        </button>
                    </div>
                `;
                inventoryElement.appendChild(itemElement);
            });
            
            // æ·»åŠ å‡ºå”®æŒ‰é’®äº‹ä»¶
            document.querySelectorAll('.sell-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    sellToCustomer(parseInt(btn.dataset.id));
                });
            });
        }

        // è·å–ç¨€æœ‰åº¦é¢œè‰²
        function getRarityColor(rarity) {
            const colors = {
                common: 'gray',
                uncommon: 'green',
                rare: 'blue'
            };
            return colors[rarity] || 'gray';
        }

        // è·å–ç¨€æœ‰åº¦åç§°
        function getRarityName(rarity) {
            const names = {
                common: 'æ™®é€š',
                uncommon: 'ç¨€æœ‰',
                rare: 'ç½•è§'
            };
            return names[rarity] || 'æ™®é€š';
        }

        // æ›´æ–°UI
        function updateUI() {
            document.getElementById('cash').textContent = gameState.cash;
            document.getElementById('street-cred').textContent = gameState.streetCred;
            
            // æ ¹æ®å£°èª‰æ”¹å˜å£°èª‰æ˜¾ç¤ºé¢œè‰²
            const credElement = document.getElementById('street-cred');
            credElement.className = 'font-bold ' + (
                gameState.streetCred >= 75 ? 'text-green-400' : 
                gameState.streetCred >= 50 ? 'text-blue-400' :
                gameState.streetCred >= 25 ? 'text-yellow-400' : 'text-red-400'
            );
            
            // ç¦ç”¨åˆ·æ–°æŒ‰é’®å¦‚æœç°é‡‘ä¸è¶³
            document.getElementById('find-customer-btn').disabled = gameState.cash < 50;
        }

        // åˆå§‹åŒ–æ¸¸æˆ
        window.onload = initGame;
    </script>
</body>
</html>
